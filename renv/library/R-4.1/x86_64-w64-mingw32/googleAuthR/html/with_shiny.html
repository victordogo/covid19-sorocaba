<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Turn a googleAuthR data fetch function into a Shiny...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for with_shiny {googleAuthR}"><tr><td>with_shiny {googleAuthR}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Turn a googleAuthR data fetch function into a Shiny compatible one</h2>

<h3>Description</h3>

<p>Turn a googleAuthR data fetch function into a Shiny compatible one
</p>


<h3>Usage</h3>

<pre>
with_shiny(f, shiny_access_token = NULL, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>f</code></td>
<td>
<p>A function generated by <code>googleAuth_fetch_generator</code>.</p>
</td></tr>
<tr valign="top"><td><code>shiny_access_token</code></td>
<td>
<p>A reactive object that resolves to a token.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Other arguments passed to f.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the function f with an extra parameter, shiny_access_token=NULL.
</p>


<h3>Examples</h3>

<pre>
## Not run: 
## in global.R

## create the API call function, example with goo.gl URL shortner
library(googleAuthR)
options("googleAuthR.scopes.selected" = c("https://www.googleapis.com/auth/urlshortener"))

shorten_url &lt;- function(url){

  body = list(
    longUrl = url
 )
 
 f &lt;- gar_api_generator("https://www.googleapis.com/urlshortener/v1/url",
                        "POST",
                        data_parse_function = function(x) x$id)
                        
 f(the_body = body)
 
 }


## in server.R
library(shiny)
library(googleAuthR)
source('global.R')

shinyServer(function(input, output, session)){
  
  ## Get auth code from return URL
  access_token  &lt;- reactiveAccessToken(session)

  ## Make a loginButton to display using loginOutput
  output$loginButton &lt;- renderLogin(session, access_token())

  short_url_output &lt;- eventReactive(input$submit, {
  ## wrap existing function with_shiny
  ## pass the reactive token in shiny_access_token
  ## pass other named arguments
    short_url &lt;- with_shiny(f = shorten_url, 
                           shiny_access_token = access_token(),
                           url=input$url)
                           
   })
   
   output$short_url &lt;- renderText({
   
     short_url_output()
     
   })
 }

## in ui.R
library(shiny)
library(googleAuthR)

shinyUI(
  fluidPage(
    loginOutput("loginButton"),
    textInput("url", "Enter URL"),
    actionButton("submit", "Shorten URL"),
    textOutput("short_url")
    ))

## End(Not run)
</pre>

<hr /><div style="text-align: center;">[Package <em>googleAuthR</em> version 1.4.1 <a href="00Index.html">Index</a>]</div>
</div></body></html>
