<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Provision a service account</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body><div class="container">

<table width="100%" summary="page for gar_service_provision {googleAuthR}"><tr><td>gar_service_provision {googleAuthR}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Provision a service account</h2>

<h3>Description</h3>

<p>This uses all the <a href="../../googleAuthR/help/gar_service_create.html">gar_service_create</a> functions to enable creating service account roles more easily
</p>


<h3>Usage</h3>

<pre>
gar_service_provision(
  accountId,
  roles,
  json = Sys.getenv("GAR_CLIENT_JSON"),
  file = paste0(accountId, "-auth-key.json"),
  email = Sys.getenv("GARGLE_EMAIL")
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>accountId</code></td>
<td>
<p>The service accountId</p>
</td></tr>
<tr valign="top"><td><code>roles</code></td>
<td>
<p>A character vector of roles to give the accountIds e.g. <code>roles/editor</code> - see list of roles here <a href="https://cloud.google.com/iam/docs/understanding-roles#predefined_roles">https://cloud.google.com/iam/docs/understanding-roles#predefined_roles</a> or in your GCP console <code>https://console.cloud.google.com/iam-admin/roles/details/roles</code></p>
</td></tr>
<tr valign="top"><td><code>json</code></td>
<td>
<p>The file location of an OAuth 2.0 client ID json file</p>
</td></tr>
<tr valign="top"><td><code>file</code></td>
<td>
<p>The file to download the private JSON key to</p>
</td></tr>
<tr valign="top"><td><code>email</code></td>
<td>
<p>An existing gargle cached email to authenticate with or TRUE to authenticate with the only email available.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You will need the OAuth2.0 Client ID JSON from your GCP project via 
<code>menu icon &gt; APIs &amp; Services &gt; Credentials &gt; Create Credentials &gt; OAuth client ID</code>
</p>
<p>You need to authenticate with a user with permission <code>iam.serviceAccounts.create</code> for the project.  Most often the user is an Owner/Editor
</p>


<h3>See Also</h3>

<p><a href="https://cloud.google.com/iam/docs/creating-managing-service-accounts#iam-service-accounts-create-rest">https://cloud.google.com/iam/docs/creating-managing-service-accounts#iam-service-accounts-create-rest</a>
</p>
<p>Other IAM functions: 
<code><a href="../../googleAuthR/help/gar_service_create.html">gar_service_create</a>()</code>
</p>


<h3>Examples</h3>

<pre>
## Not run: 

gar_service_provision("my-service-account", 
                      c("roles/viewer", "roles/bigquery.jobUser"))

## End(Not run)
</pre>

<hr /><div style="text-align: center;">[Package <em>googleAuthR</em> version 1.4.1 <a href="00Index.html">Index</a>]</div>
</div></body></html>
